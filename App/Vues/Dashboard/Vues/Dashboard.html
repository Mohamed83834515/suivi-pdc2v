<section ng-init="InitialiseDashboardG()">

    <!-- begin breadcrumb -->
    <div class="row" style="justify-content: space-between;padding: 10px;">

        <h2 class="page-header font-weight-bold" style="color: #1565C0;"> BIENVENUE | <label
                style="color: black;">{{PrenomUser}} {{NomUser}} {{FonctionUser}}
                <label style="color: #cf0d0d;" ng-repeat="version in ListeVerion"
                    ng-if="version.id_version_ptba == Version">
                    (PTBA {{ version.annee_ptba + '-' + version.version_ptba }})
                </label>  
        </h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="javascript:;">Accueil</a></li>
            <li class="breadcrumb-item"><a href="javascript:;">Tableau de bord</a></li>
            <!-- <li class="breadcrumb-item active">Dashboard v2</li> -->
        </ol>
    </div>
    <!-- end breadcrumb -->
    <!-- begin page-header -->
    <!-- end page-header -->
    <!-- begin row -->
    <div class="row">
        <style>
            .t-grey {
                font-size: 18px !important;
                font-weight: 500 !important;
                color: white !important;
            }

            .widget-stats .stats-number {
                margin-bottom: 0px !important;
            }
        </style>
        <!-- begin col-3 -->
        <div class="col-lg-3 col-md-6">
            <div class="widget widget-stats bg-gradient-teal">
                <div class="stats-icon stats-icon-lg"><i class="fa fa-globe fa-fw"></i></div>
                <div class="stats-content" ng-click="ChangeVersion(Version)">
                    <a href="" style="color: white;">
                        <div class="stats-title text-white t-grey">Activités prévues</div>
                        <div class="stats-number">{{ListeActivite2.length}} </div>
                        <div class="stats-number" ng-if="ListeActivite.length == null">0</div>
                        <div class="stats-progress progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                    </a>

                    <!-- <div class="stats-desc">Better than last week (70.1%)</div> -->
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6">
            <div class="widget widget-stats bg-orange">
                <div class="stats-icon stats-icon-lg"><i class="fa fa-globe fa-fw"></i></div>
                <div class="stats-content" ng-click="get_Tache_Valide1()">
                    <a href="" style="color: white;">
                        <div class="stats-title t-grey">Activité réalisées</div>
                        <div class="stats-number">{{get_Tache_Valide()}} / ({{get_Tache_Valide() / ListeActivite2.length * 100 | number:0 }}%) </div>
                        <div class="stats-progress progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                    </a>

                    <!-- <div class="stats-desc">Better than last week (70.1%)</div> -->
                </div>
            </div>
        </div>
        <!-- end col-3 -->
        <!-- begin col-3 -->
        <div class="col-lg-3 col-md-6">
            <div class="widget widget-stats bg-gradient-blue">
                <div class="stats-icon stats-icon-lg"><i class="fa fa-dollar-sign fa-fw"></i></div>
                <div class="stats-content" ng-click="get_Tache_Attente1()">
                    <a href="" style="color: white;">
                        <div class="stats-title t-grey">Activité en cours</div>
                        <div class="stats-number">{{get_Tache_Attente()}} / ({{get_Tache_Attente() / ListeActivite2.length * 100 | number:0 }}%)</div>
                        <div class="stats-progress progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                    </a>

                    <!-- <div class="stats-desc">Better than last week (40.5%)</div> -->
                </div>
            </div>
        </div>
        <!-- end col-3 -->
        <!-- begin col-3 -->
        <div class="col-lg-3 col-md-6">
            <div class="widget widget-stats bg-red">
                <div class="stats-icon stats-icon-lg"><i class="fa fa-archive fa-fw"></i></div>
                <div class="stats-content" ng-click="get_Tache_Echus1()">
                    <a href="" style="color: white;">
                        <div class="stats-title t-grey">Activités échues</div>
                    <div class="stats-number">{{get_Tache_Echus()}} / ({{get_Tache_Echus() / ListeActivite2.length * 100 | number:0 }}%)</div>
                    <div class="stats-progress progress">
                        <div class="progress-bar" style="width: 100%;"></div>
                    </div>
                    </a>
                    
                    <!-- <div class="stats-desc">Better than last week (76.3%)</div> -->
                </div>
            </div>
        </div>
        <!-- end col-3 -->
        <!-- begin col-3 -->
        <!-- end col-3 -->
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel-body">
                <div class="d-flex bd-highlight mb-3">
                    <div class="p-2 mr-auto bd-highlight d-flex">
                        <label for="" class="mr-2"> Version PTBA</label>
                        <select class="form-control" ng-change="ChangeVersion(Version);getActiviteChange(Version);getTauxDecaisserByuserVersion(Version);getTauxDecaisserByuserVersion(Version);getTauxIndicateurByuserVersion(Version)" id="selectElement"  name="Version" ng-model="Version" required
                            ng-options="TypeBeneficiaire.id_version_ptba as (TypeBeneficiaire.annee_ptba + '-' + TypeBeneficiaire.version_ptba) for TypeBeneficiaire in ListeVerion">
                        </select>
                    </div>

                    <div class="p-2 mr-auto bd-highlight d-flex align-items-center">
                      <label for="" style="font-size: 18px;"> Taux de décaiss. : <label for="" style="color: #cf0d0d;">{{tauxByUser | number:2}}% </label></label>  
                      <label for="" style="font-size: 18px;">| Taux d'indicateur. : <label for="" style="color: #cf0d0d;">{{tauxByIndicateurUser | number:2}}%</label></label> 
                    </div>

                    <div class="p-2 bd-highlight">
                        <a class="btn btn-sm btn-outline-success" type="button" data-click="panel-reload" ng-click=""
                            title="Actualiser" href=""><i class="fa fa-refresh"></i></a>
                    </div>
                    <div class="p-2 bd-highlight">
                        <input class="form-control form-control-sm" title="Actualiser"
                            ng-keyup="myFunction();updateNumeroAfficher()" id="numero" ng-model="numero"
                            placeholder="recherche">
                    </div>
                </div>


                <!-- Button trigger modal  align-items-center-->


                <!-- Modal -->

                <table id="" class="table table-striped table-responsive table-bordered">
                    <thead>
                        <tr>
                            <th width="80">Code</th>
                            <th width="400">Intitulés</th>
                            <th width="150"> Responsable de suivi </th>
                            <th width="100"> Responsable UCP</th>
                            <th width="100">Activités</th>
                            <th width="100">Decaissements</th>
                            <th width="100">Indicateurs </th>
                            <th width="100">Délai de réalisation </th>
                            <th width="100">Retard accusé </th>
                            <th width="200">Observation Générale</th>
                            <!-- <th width="15%">Date de suivi(jj/mm/aa)</th>
                        <th width="15%">Sources de verification</th>
                        <th>Observation</th>
                        <th>Action</th> -->
                        </tr>
                    </thead>

                    <tbody>
                        <tr class="odd gradeX" ng-repeat="activite in ListeActivite|filter:numero">
                            <td class="t-grey"
                                style="color: black !important;font-size: 12px !important; font-weight: 700 !important;">
                                {{activite.code_activite_ptba}}</td>
                            <td>{{activite.intitule_activite_ptba}}</td>
                            <td>

                                {{getStructure(activite.acteur_conserne)}}
                                <!-- {{ getFonction(activite.executant) }} 
                            <label for="" ng-repeat="users in ListeActivite1" ng-if="activite.executant === users.id_personnel">
                                
                            -->
                            </td>
                            <td>

                                {{activite.responsable}}
                                <!-- {{ getNom(activite.executant) }} 
                            {{ getPrenom(activite.executant) }} -->
                            </td>
                            <td class="text-center">
                                <label href="" data-toggle="modal" data-target="#exampleModal1"
                                    ng-click="getSuiviActivite(activite.id_ptba)"> <label for=""
                                        class="text-dark">{{getLastEtat(activite.id_ptba)}}</label>
                                    <div>
                                        <label ng-if="getTache(activite.id_ptba) != null">
                                            <a ng-if="getTache(activite.id_ptba) == 'Achevé'"
                                                style="color: #168E37; text-align: center !important;justify-content: center;"
                                                href="">({{getTache(activite.id_ptba)}})</a>
                                            <a ng-if="getTache(activite.id_ptba) == 'En cours'" style="color: #E79300;"
                                                href="">({{getTache(activite.id_ptba)}})</a>
                                            <a ng-if="getTache(activite.id_ptba) == 'Non déterminé'"
                                                style="color: #da0f0f;" href="">({{getTache(activite.id_ptba)}})</a>
                                        </label>
                                        <a ng-if="getTache(activite.id_ptba) == null && getTacheCount(activite.id_ptba)!=0"
                                            style="color: #da0f0f;" href="">(Non determiné)</a>
                                        <a ng-if="getTacheCount(activite.id_ptba) == 0" style="color: #da0f0f;"
                                            href="">(Aucun suivi)</a>
                                    </div>

                                </label>
                            </td>
                            <td class="text-center">
                                <label data-toggle="modal" data-target="#exampleModal11"
                                    ng-click="getMaTache(activite.id_ptba)" style="text-align: center !important;">
                                    <a href="" ng-if="getTache1(activite.id_ptba) * 100 / activite.cout != 0">
                                        {{ getTache1(activite.id_ptba) * 100 / activite.cout | number:2}} %
                                    </a>
                                    <a href="" ng-if="getTache1(activite.id_ptba) * 100 / activite.cout == 0">
                                        <i class="fas fa-pencil-square-o fa-1x"></i> Décaisser
                                    </a>
                                </label>
                            </td>

                            <td class="text-center">
                                <label for="" data-toggle="modal" data-target="#exampleModal111"
                                    ng-click="getMyIndicateur(activite.id_ptba)">
                                    <a href="" ng-if="getTauxRealiser(activite.id_ptba) != 0" for="">
                                        <div class="mt-3">
                                            <div class="progress">
                                                <div class="progress-bar progress-bar-striped"
                                                    ng-if="getTauxRealiser(activite.id_ptba) <= 70" role="progressbar"
                                                    style="background-color: #E79300 !important;"
                                                    ng-style="{ 'width': (getTauxRealiser(activite.id_ptba)) + '%' }"
                                                    aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
                                                    <div class="text-center">
                                                        {{getTauxRealiser(activite.id_ptba) | number: 0}} %
                                                    </div>
                                                </div>
                                                <div class="progress-bar progress-bar-striped"
                                                    ng-if="getTauxRealiser(activite.id_ptba) >= 71" role="progressbar"
                                                    style="background-color: #168E37 !important;"
                                                    ng-style="{ 'width': (getTauxRealiser(activite.id_ptba)) + '%' }"
                                                    aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
                                                    <div class="text-center">
                                                        {{getTauxRealiser(activite.id_ptba) | number: 0}} %
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </a>

                                    <a ng-if="getTauxRealiser(activite.id_ptba) == 0" href=""> <i
                                            class="fas fa-pencil-square-o fa-1x"></i> Suivre</a>
                                </label>
                            </td>
                            <td>{{activite.fin | date:'dd/MM/yyyy'}}</td>
                            <td>
                                <label ng-style="{ 'color': (colorretard)  }">
                                    {{(getRetard(getTache(activite.id_ptba),activite.fin,getLastDateRealise(activite.id_ptba)))}}
                                </label>
                            </td>
                            <td>
                                <label for="" ng-if="activite.responsable === nom1"><a href=""
                                        ng-click="getTache2(activite.id_ptba,activite.observation,activite.fin)">
                                        {{activite.observation}} <i class="fa fa-pencil-square-o mr-2"
                                            style="color: #168E37;font-size: 20px;"></i> </a>
                                </label>
                                <label for="" ng-if="activite.responsable !== nom1">
                                    {{activite.observation}}
                                </label>
                                <label for="" ng-if="activitesChecked == 1"> 
                                    <label for="" ng-if="activite.statut != 2">
                                    <a href=""ng-click="AlertValideAllSuivis(activite.id_ptba,2)">
                                        Valider toutes les suivis
                                      </a>
                                    </label>
                                    <label for="" ng-if="activite.statut == 2">
                                    <a href=""ng-click="AlertValideAllSuivis(activite.id_ptba,0)">
                                        Annuler toutes les suivis
                                      </a>
                                    </label>
                                </label>
                            </td>
                            <!-- <td>
                            <a href="" style="color: #e79300; font-size: 20px; padding: 5px" ng-click="Motif.IdTache = activite.id_ptba" data-toggle="modal" data-target="#exampleModal">
                                <i class="fas fa-plus-circle"></i>
                            </a>
                        </td>
                        <td>
                            <a href="" style="color: #e79300; font-size: 20px; padding: 5px" ng-click="Motif.IdTache = activite.id_ptba" data-toggle="modal" data-target="#exampleModall">
                                <i class="fas fa-plus-circle"></i>
                            </a>
                        </td> -->

                        </tr>
                    </tbody>
                </table>
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">Nouvelle Tâche</h5>
                                <button type="button" ng-click="InitialiseDashboardG()" class="close"
                                    data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <style>
                                .row>[class^="col-"] {
                                    margin-bottom: -5px;
                                }
                            </style>
                            <div class="modal-body">
                                <form name="FormMotif11" novalidate>
                                    <div class="row">
                                        <!-- Premier groupe de champs -->
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <!-- <label for="message-text" class="col-form-label">Réalisation {{Motif.CodeTache}}  <span
                                                style="color:red;"> *</span></label> -->
                                                <input type="hidden" class="form-control" ng-value="{{Motif.Nlot}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.Nlot"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control"
                                                    ng-value="{{id_activite_ptba_1}}" name="Motif" placeholder="Libelle"
                                                    ng-model="Motif.IdTache" ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.CodeTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.CodeTache"
                                                    ng-pattern="regexCote" required>

                                            </div>
                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Date de
                                                    suivi<span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" ng-model="Motif.DateReelle"
                                                        name="DateReelle" type="date" required
                                                        ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }">
                                                    <span style="color:red;"
                                                        ng-show="FormMotif11.DateReelle.$touched && FormMotif11.DateReelle.$invalid">Champ
                                                        obligatoire ou caractère invalide
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Premier champ textarea : {{Motif.Difficultes}}-->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Etat
                                                    d'avancement <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <textarea class="form-control" name="Observation"
                                                        placeholder="Etat d'avancement" ng-value="{{Motif.Observation}}"
                                                        ng-model="Motif.Observation" ng-pattern="regexCote"
                                                        required></textarea>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif11.Observation.$touched && FormMotif11.Observation.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Source de
                                                    vérification<span style="color:red;"> *</span>
                                                </label>
                                                <div class="col-lg-9">
                                                    <input type="file" class="form-control" ng-pattern="regexCote"
                                                        name="file" id="file">
                                                    <!-- <span style="color:red;" ng-if="Motif.files == 1">
                                               champ obligatoire 
                                            </span> -->
                                                </div>
                                            </div>

                                        </div>
                                        <!-- statut Activité {{Motif.StatutTache}}-->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Statut de
                                                    l'activité <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <select class="form-control" name="selectChoice"
                                                        ng-model="Motif.StatutTache" required>

                                                        <option value="Non déterminé">Non déterminé</option>
                                                        <option value="En cours">En cours</option>
                                                        <option value="Achevé">Achevé</option>
                                                    </select>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif11.selectChoice.$touched && FormMotif11.selectChoice.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Difficultés
                                                </label>
                                                <div class="col-lg-9">
                                                    <textarea type="text" class="form-control" name="Motif"
                                                        placeholder="Difficultés" ng-value="Motif.Difficultes"
                                                        ng-model="Motif.Difficultes" ng-pattern="regexCote">
                                            </textarea>
                                                </div>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Piste de
                                                    solution </label>
                                                <div class="col-lg-9">
                                                    <textarea type="text" class="form-control" name="Motif"
                                                        placeholder="Piste de solution" ng-model="Motif.PisteSolutions"
                                                        ng-pattern="regexCote"></textarea>
                                                </div>

                                            </div>
                                        </div>
                                        <!-- Deuxième champ textarea -->

                                    </div>


                                </form>
                            </div>
                            <div class="modal-footer">
                                <button name="Valider" value="Valider" ng-disabled="FormMotif11.$invalid"
                                    ng-click="ValiderEditionTache(Motif.IdTache)" class="btn"
                                    style="background-color: #168e37;color: white;" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button ng-click="getTache(id_activite_ptba_1)" class="btn btn-danger"
                                    data-toggle="modal" data-target="#exampleModal1" data-dismiss="modal"
                                    aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color:#168E37; color: white !important;">
                                <h5 class="modal-title" id="exampleModalLabel">
                                    <label class="text-white text-center" ng-repeat="activite in ListeActivite"
                                        ng-if="id_activite_ptba_1 === activite.id_ptba">
                                        {{activite.code_activite_ptba}}: {{activite.intitule_activite_ptba}}
                                    </label>
                                </h5>
                                <!--   && showbutton1(id_activite_ptba_1) === 2-->
                                <a href="" ng-if="getTache(id_activite_ptba_1) != 'Achevé' || suividata.length === 0"
                                    style="color: white;background-color: black; font-size: 20px; padding: 5px"
                                    ng-click="InitialiseDashboardG();Motif.IdTache = id_activite_ptba_1"
                                    class="btn-sm btn col-lg-2" data-toggle="modal" data-target="#exampleModal"
                                    data-dismiss="modal">
                                    <i class="fas fa-plus-circle"> Nouveau</i>
                                </a>
                            </div>
                            <div class="modal-body">
                                <table id="" class="table table-striped table-responsive table-bordered">
                                    <thead>
                                        <tr>
                                            <!-- <th>Code </th> -->
                                            <th width="130">Statut</th>
                                            <th width="300">Etat d'avancement</th>
                                            <th width="110">Date de suivi</th>
                                            <th width="150">Difficultés</th>
                                            <th width="150">Action</th>

                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr class="odd gradeX" ng-repeat="Motif in suividata">
                                            <!-- <td>{{Motif.code_suivi}} {{Motif.etat}}</td> -->
                                            <td>{{Motif.statut_activite}}</td>
                                            <td>{{Motif.observation}}</td>
                                            <td>{{ Motif.date_suivi | date:'dd/MM/yyyy' }}</td>
                                            <td>{{ Motif.difficultes_rencontrees}}</td>
                                            <td>
                                                <!-- <div ng-repeat="activite in ListeActivite" ng-if="activite.responsable === nom1 || activite.executant === nom1 && Motif.id_activite_ptba === activite.id_ptba"> -->
                                                <div ng-if="Motif.etat != 1 && Motif.etat != 2">
                                                    <a href="" ng-click="getTacheById(Motif.id_suivi)" title="Modifier"
                                                        data-toggle="modal" data-target="#exampleModal3"
                                                        data-dismiss="modal">
                                                        <i class="fa fa-pencil-square-o mr-2"
                                                            style="color:#231dd9;font-size: 20px;"></i>
                                                    </a>
                                                    <a href="" ng-click="confirmDelete(Motif,id_activite_ptba_1)"
                                                        title="Supprimer">
                                                        <i class="fas fa-trash-alt mr-2"
                                                            style="color:#cf0d0d;font-size: 20px;"></i>
                                                    </a>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === Motif.id_activite_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href=""
                                                                ng-click="getAlertValidationTache(Motif.id_suivi,Motif.id_activite_ptba,1)"
                                                                title="Valider"> <i
                                                                    class="fas fa-check-circle fa-2x"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <!-- </div> -->
                                                <div ng-if="Motif.etat == 1">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée</i>
                                                    </label>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === Motif.id_activite_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href="" style="color:#cf0d0d;"
                                                                ng-click="getAlertValidationTache(Motif.id_suivi,Motif.id_activite_ptba,0)"
                                                                title="Annuler"> <i class="fas fa-times fa-2x"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <div ng-if="Motif.etat == 2">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée par le SSE
                                                        </i>
                                                    </label>
                                                </div>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <!-- <button type="button" class="btn btn-seocndary"
                        data-dismiss="modal">Close</button> -->
                                <button type="button" style="background-color: #168E37; color: white;"
                                    data-dismiss="modal" class="btn"> <i class="fas fa-close"> </i> Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">Modification Tâche</h5>
                                <button type="button" ng-click="InitialiseDashboardG()" class="close"
                                    data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form name="FormMotif" novalidate>
                                    <div class="row">
                                        <!-- Premier groupe de champs -->
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <!-- <label for="message-text" class="col-form-label">Réalisation {{Motif.CodeTache}}  <span
                                            style="color:red;"> *</span></label> -->
                                                <input type="hidden" class="form-control" ng-value="{{Motif.Nlot}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.Nlot"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.IdTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.IdTache"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.CodeTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.CodeTache"
                                                    ng-pattern="regexCote" required>
                                            </div>
                                            <!-- <div class="form-group">
                                    <label for="message-text" class="col-form-label">Date de suivi<span
                                            style="color:red;"> *</span></label>
                                    <input class="form-control no-placeholder" ng-model="Motif.DateReelle"
                                        type="date" required
                                        ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }">
                                </div> -->
                                        </div>

                                    </div>

                                    <div class="row">
                                        <!-- Premier champ textarea : {{Motif.Difficultes}}-->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Date de
                                                    suivi<span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input class="form-control no-placeholder"
                                                        ng-model="Motif.DateReelle" type="date" required
                                                        ng-value="{{Motif.DateReelle}}"
                                                        ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }">
                                                    <span style="color:red;"
                                                        ng-show="FormMotif.Motif.$dirty && FormMotif.Motif.$invalid">Champ
                                                        obligatoire ou caractère invalide
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                        <!-- Deuxième champ textarea -->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Etat
                                                    d'avancement<span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <textarea class="form-control" name="Motif" placeholder="Libelle"
                                                        ng-value="{{Motif.Observation}}" ng-model="Motif.Observation"
                                                        ng-pattern="regexCote" required></textarea>

                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Source de
                                                    vérification<span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input type="file" class="form-control" name="file12"
                                                        placeholder="Libelle" id="file12" required>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-lg-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Statut de
                                                    l'activité <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <select class="form-control" name="selectChoice"
                                                        ng-model="Motif.StatutTache" required>

                                                        <option value="Non déterminé">Non déterminé</option>
                                                        <option value="En cours">En cours</option>
                                                        <option value="Achevé">Achevé</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Difficultés
                                                </label>
                                                <div class="col-lg-9">
                                                    <textarea type="text" class="form-control" cols="100" rows="2"
                                                        name="Motif" placeholder="Libelle" ng-value="Motif.Difficultes"
                                                        ng-model="Motif.Difficultes" ng-pattern="regexCote" required>
                                        </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Piste de
                                                    solution </label>
                                                <div class="col-lg-9">
                                                    <textarea type="text" class="form-control" name="Motif"
                                                        placeholder="Libelle" ng-model="Motif.PisteSolutions"
                                                        ng-pattern="regexCote" required>
                                        </textarea>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            <div class="modal-footer">
                                <button ng-click="validerHistorique(Motif.IdTache)" class="btn text-white"
                                    style="background-color: #168e37;" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button ng-click="getTache(id_activite_ptba_1)" class="btn btn-danger"
                                    data-toggle="modal" data-target="#exampleModal1" data-dismiss="modal"
                                    aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModal11" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">
                                    <label class="text-white text-center" ng-repeat="activite in ListeActivite"
                                        ng-if="id_activite_ptba_2 === activite.id_ptba">
                                        {{activite.code_activite_ptba}}: {{activite.intitule_activite_ptba}}
                                    </label>

                                    <!-- <a href="" style="color: white;background-color: #e79300; font-size: 20px; padding: 5px" class="btn-sm col-lg-2"  data-toggle="modal" data-target="#exampleModall">
                                    <i class="fas fa-plus-circle"> Nouveau</i>
                                </a> -->
                                </h5>
                                <!--showbutton(id_activite_ptba_2) === 2 || <label class="" for="" ng-repeat="activite in ListeActivite" ng-if="activite.responsable === nom1 || activite.executant === nom1 && id_activite_ptba_2 === activite.id_ptba"> -->
                                <a href="" style="color: white;background-color: black; font-size: 20px; padding: 5px"
                                    data-dismiss="modal" ng-click="Motif.IdTache = id_activite_ptba_2"
                                    class="btn-sm btn col-lg-2 text-white" data-toggle="modal"
                                    data-target="#exampleModall">
                                    <i class="fas fa-plus-circle"> Nouveau</i>
                                </a>
                                <!-- </label> -->
                                <!-- <a href="" data-toggle="modal" data-target="#exampleModall" data-dismiss="modal" ng-if="showbutton(id_activite_ptba_2) === 2" style="color: white;background-color: #e79300; font-size: 20px; padding: 5px" ng-click="Motif.IdTache = id_activite_ptba_2" class="btn-sm col-lg-2 btn">
                                <i class="fas fa-plus-circle"> Nouveau</i> 
                            </a>  -->
                            </div>
                            <div class="modal-body">
                                <table id="" class="table table-striped table-responsive table-bordered">
                                    <thead>
                                        <tr>
                                            <!-- <th>Code</th> -->
                                            <th width="100">Montant (CFA)</th>
                                            <th width="350">Observation</th>
                                            <th width="150">Initié par</th>
                                            <th width="110">Date suivi</th>
                                            <th width="150">Action</th>

                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr class="odd gradeX" ng-repeat="Motif in decaissements">
                                            <!-- <td>{{Motif.code_suivi}}</td> -->
                                            <td>{{formatAmount(Motif.montant_decaisse)}}</td>
                                            <td>{{Motif.observation}}</td>
                                            <td>{{Motif.id_personnel}}</td>
                                            <!-- <td>
                                            <label for=""  ng-repeat="commune in Listecommune" ng-if="commune.code_commune === Motif.commune">
                                               {{commune.nom_commune}}
                                            </label>
                                        </td> -->
                                            <td>{{Motif.date_suivi | date:'dd/MM/yyyy' }}</td>
                                            <td>
                                                <!-- <div ng-repeat="activite in ListeActivite" ng-if="activite.responsable === nom1 || activite.executant === nom1 && Motif.id_activite_ptba === activite.id_ptba"> -->
                                                <div ng-if="Motif.etat != 1 && Motif.etat != 2">
                                                    <a title="Modifier" href=""
                                                        ng-click="getDecaissementById(Motif.id_suivi,Motif.id_activite_ptba)"
                                                        data-toggle="modal" data-target="#exampleModal33"
                                                        data-dismiss="modal">
                                                        <i class="fa fa-pencil-square-o mr-2"
                                                            style="color:#0e0e90;font-size: 20px;"></i>
                                                    </a>
                                                    <a href="" title="Supprimer"
                                                        ng-click="confirmDelete1(Motif,id_activite_ptba_2)">
                                                        <i class="fas fa-trash-alt mr-2"
                                                            style="color:#cf0d0d;font-size: 20px;"></i>
                                                    </a>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === Motif.id_activite_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href="" title="Valider"
                                                                ng-click="getAlertValidationDecaiss(Motif.id_suivi,Motif.id_activite_ptba,1)">
                                                                <i class="fas fa-check-circle fa-2x"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <!-- </div> -->
                                                <div ng-if="Motif.etat == 1">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée</i>
                                                    </label>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === Motif.id_activite_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href="" title="Annuler" style="color:#cf0d0d;"
                                                                ng-click="getAlertValidationDecaiss(Motif.id_suivi,Motif.id_activite_ptba,0)">
                                                                <i class="fas fa-times fa-2x"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <div ng-if="Motif.etat == 2">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée par le SSE
                                                        </i>
                                                    </label>
                                                </div>

                                            </td>
                                            <!--<td>{{Motif.livrable}}  </td> -->

                                            <!-- <td>
                                            <a href="" ng-click="getMaTache(Motif.contrat,Motif.id_suivi)" data-toggle="modal"
                                                data-target="#exampleModal1">
                                                Voir les décaissements
                                            </a>
                                        </td> -->

                                            <!-- <td>
                                            <a href="" ng-click="getSousActivite(Motif.contrat,Motif.id_suivi)" data-toggle="modal"
                                                data-target="#exampleModal">
                                                <i class="fa fa-pencil-square-o mr-2" style="color:#168E37;font-size: 20px;"
                                                    aria-hidden="true"></i>
                                            </a> -->

                                            <!-- <a  href="" data-toggle="modal" data-target="#exampleModal" class="btn btn-sm btn-success" type="button">  Modifier</a> -->
                                            <!-- <a href="" ng-click="validerTache(Motif)">
                                                <i class="fa fa-check-circle text-success mr-2" title="Valider" style="font-size: 20px;" aria-hidden="true"></i>
                                            </a> -->
                                            <!-- </td> -->
                                        </tr>
                                    </tbody>
                                    <table class="table table-bordered table-responsive">
                                        <div class="row">
                                            <style>

                                            </style>
                                            <div class="col-12">
                                                <thead style="background-color:#E79300 !important;">
                                                    <tr>
                                                        <th class="text-white"
                                                            style="font-size: 15px;background-color:#E79300 !important;"
                                                            width="450">

                                                            <label for=""
                                                                style="font-size: 15px; color: white;float: right;">
                                                                Total (CFA)
                                                            </label>
                                                        </th>
                                                        <th class="text-white"
                                                            style="font-size: 15px;background-color:#E79300 !important;"
                                                            width="150">
                                                            <label for="" style="font-size: 15px; color: white; "
                                                                ng-repeat="activite in ListeActivite"
                                                                ng-if="activite.id_ptba === id_activite_ptba_2">
                                                                {{formatAmount(getSomme())}}
                                                            </label>
                                                        </th>
                                                        <th class="text-white"
                                                            style="font-size: 15px;background-color:#E79300 !important;"
                                                            width="300">
                                                            <label for=""
                                                                style="font-size: 15px; color: white; float: right;">
                                                                Taux
                                                            </label>
                                                        </th>
                                                        <th class="text-white"
                                                            style="background-color:#E79300 !important;" width="200">
                                                            <label for="" style="font-size: 15px; color: white;"
                                                                ng-repeat="activite in ListeActivite"
                                                                ng-if="activite.id_ptba === id_activite_ptba_2">
                                                                {{getSomme() * 100 / activite.cout | number : 2}} %
                                                            </label>
                                                        </th>
                                                    </tr>
                                                </thead>
                                            </div>

                                        </div>

                                    </table>
                                </table>
                                <table class="table table-bordered table-responsive">
                                    <div class="row">

                                        <div class="col-12">
                                            <thead>
                                                <tr>
                                                    <th width="417" style="background-color: #168E37 !important;">
                                                        <label for=""
                                                            style="font-size: 15px; color: white;float: right;">
                                                            Montant prévu (CFA)
                                                        </label>
                                                    </th>
                                                    <th style="background-color: #168E37 !important;" width="350">
                                                        <label for="" style="font-size: 15px; color: white;"
                                                            ng-repeat="activite in ListeActivite"
                                                            ng-if="activite.id_ptba === id_activite_ptba_2">
                                                            {{formatAmount(activite.cout)}}
                                                        </label>
                                                    </th>
                                                </tr>
                                            </thead>
                                        </div>

                                    </div>

                                </table>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button name="Valider" value="Valider" data-dismiss="modal" aria-label="Close"
                                    class="btn text-white" style="background-color: #168e37 !important;" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Fermer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModal33" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">Modification Decaissement</h5>
                                <button type="button" ng-click="InitialiseDashboardG()" class="close"
                                    data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form name="FormMotif" novalidate>

                                    <div class="">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <!-- <label for="message-text" class="col-form-label">Code {{Motif.IdTache}} - {{Motif.CodeTache}}  <span
                                                                style="color:red;"> *</span></label> -->
                                                <input type="hidden" class="form-control" ng-value="{{Motif.Nlot}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.Nlot"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.IdTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.IdTache"
                                                    ng-value="{{Motif.IdTache}}" ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.CodeTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.CodeTache"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control"
                                                    ng-value="{{Motif.StatutTache}}" name="Motif" placeholder="Libelle"
                                                    ng-model="Motif.StatutTache" ng-pattern="regexCote" required>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Date de suivi
                                                    <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input class="form-control no-placeholder" type="date"
                                                        ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }"
                                                        ng-model="Motif.DateReelle" ng-value="{{Motif.DateReelle}}"
                                                        required>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif.Motif.$dirty && FormMotif.Motif.$invalid">Champ
                                                        obligatoire ou caractère invalide
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Source de
                                                    vérification <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input type="file" class="form-control" name="file22"
                                                        placeholder="Libelle" id="file22" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Montant
                                                    décaissé <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" name="Motif"
                                                        placeholder="Montant décaissé" ng-value="{{Motif.Difficultes}}"
                                                        ng-model="Motif.Difficultes" ng-pattern="regexCote" required>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif.Motif.$dirty && FormMotif.Motif.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="col-md-12">
                                                    <div class="form-group row">
                                                        <label for="message-text" class="col-form-label col-lg-3">Commune  <span
                                                            style="color:red;"> *</span></label>
                                                        <div class="col-lg-9">
                                                            <select class="form-control" name="Difficultes" ng-model="Motif.commune" ng-pattern="regexCote" required>
                                                                <option ng-repeat="commune in Listecommune" value="{{commune.code_commune}}">{{commune.nom_commune}}</option>
                                                            </select>
                                                            <span style="color:red;"
                                                            ng-show="FormMotif1.Difficultes.$touched && FormMotif1.Difficultes.$invalid">Champ
                                                            obligatoire ou caractère invalide</span>
                                                        </div>
                                                    </div>
                                                </div> -->

                                        <!-- Deuxième champ textarea -->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Observations
                                                    <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <textarea class="form-control" name="Motif"
                                                        placeholder="Observations" ng-value="{{Motif.Observation}}"
                                                        ng-model="Motif.Observation" ng-pattern="regexCote" required>
                                                            <span style="color:red;"
                                                            ng-show="FormMotif.Motif.$dirty && FormMotif.Motif.$invalid">Champ
                                                            obligatoire ou caractère invalide</span>
                                                            </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button name="Valider" ng-click="decaissementTache(id_activite_ptba_decaissement)"
                                    style="background-color: #168e37 !important;" class="btn text-white" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button ng-click="getTache1(id_activite_ptba_2)" class="btn btn-danger"
                                    data-toggle="modal" data-target="#exampleModal11" data-dismiss="modal"
                                    aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModall" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">Nouveau Decaissement</h5>
                                <button type="button" ng-click="InitialiseActivite()" class="close" data-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form name="FormMotif1" novalidate>

                                    <div class="">
                                        <div class="col-md-12">
                                            <div class="form-group">

                                                <input type="hidden" class="form-control" ng-value="{{Motif.Nlot}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.Nlot"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.IdTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.IdTache"
                                                    ng-pattern="regexCote" required>
                                                <input type="hidden" class="form-control" ng-value="{{Motif.CodeTache}}"
                                                    name="Motif" placeholder="Libelle" ng-model="Motif.CodeTache"
                                                    ng-pattern="regexCote" required>

                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Date de suivi
                                                    <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" ng-model="Motif.DateReelle" type="date"
                                                        required ng-required="true" name="DateReelle"
                                                        ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }">
                                                    <!-- myForm.MotDePasse.$touched && myForm.MotDePasse.$invalid -->
                                                    <span style="color:red;"
                                                        ng-show="FormMotif1.DateReelle.$touched && FormMotif1.DateReelle.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Source de
                                                    vérification <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input type="file" class="form-control" name="file1"
                                                        placeholder="Libelle" id="file1" required>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Premier champ textarea -->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text" class="col-form-label col-lg-3">Montant
                                                    décaissé <span style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <input type="number" class="form-control" name="Difficultes"
                                                        placeholder="Montant décaissé" ng-value="Motif.Difficultes"
                                                        ng-model="Motif.Difficultes" ng-pattern="regexCote"
                                                        required></textarea>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif1.Difficultes.$touched && FormMotif1.Difficultes.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="col-md-12">
                                                    <div class="form-group row">
                                                        <label for="message-text" class="col-form-label col-lg-3">Commune  <span
                                                            style="color:red;"> *</span></label>
                                                        <div class="col-lg-9">
                                                            <select class="form-control" name="Difficultes" ng-model="Motif.commune" ng-pattern="regexCote" required>
                                                                <option ng-repeat="commune in Listecommune" value="{{commune.code_commune}}">{{commune.nom_commune}}</option>
                                                            </select>
                                                            <span style="color:red;"
                                                            ng-show="FormMotif1.Difficultes.$touched && FormMotif1.Difficultes.$invalid">Champ
                                                            obligatoire ou caractère invalide</span>
                                                        </div>
                                                    </div>
                                                </div> -->

                                        <!-- Deuxième champ textarea -->
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="message-text"
                                                    class="col-form-label col-lg-3">Observations<span
                                                        style="color:red;"> *</span></label>
                                                <div class="col-lg-9">
                                                    <textarea class="form-control" name="Observation"
                                                        placeholder="Observations" ng-value="{{Motif.Observation}}"
                                                        ng-model="Motif.Observation" ng-pattern="regexCote"
                                                        required></textarea>
                                                    <span style="color:red;"
                                                        ng-show="FormMotif1.Observation.$touched && FormMotif1.Observation.$invalid">Champ
                                                        obligatoire ou caractère invalide</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button name="Valider" value="Valider" ng-disabled="FormMotif1.$invalid"
                                    ng-click="ValiderEditionTache1(Motif.IdTache)"
                                    style="background-color: #168e37 !important;" class="btn text-white" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button ng-click="getTache1(Motif.IdTache)" class="btn btn-danger" data-toggle="modal"
                                    data-target="#exampleModal11" data-dismiss="modal" aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModaObs" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">Observation </h5>
                                <button type="button" ng-click="InitialiseActivite()" class="close" data-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form name="FormMotif" novalidate>

                                    <div class="">
                                        <!-- Deuxième champ textarea -->
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="message-text" class="col-form-label">Observations <span
                                                        style="color:red;"> *</span></label>
                                                <textarea class="form-control ng-pristine ng-untouched ng-valid"
                                                    name="ObservationGenerale" placeholder="Observations"
                                                    ng-model="Motif.ObservationGenerale" ng-pattern="regexCote"
                                                    required>
                                                        </textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="message-text" class="col-form-label">Délai de réalisation </label>
                                                <input class="form-control ng-pristine ng-untouched ng-valid"
                                                    name="délai" placeholder="Observations" type="date"
                                                    ng-model="Motif.fin_activite"  ng-model-options="{ 'timezone': 'UTC', 'format': 'yyyy-MM-dd' }" ng-pattern="regexCote"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button name="Valider" value="Valider" ng-click="ValiderEditionObservation(myid)"
                                    style="background-color: #168e37 !important;" class="btn text-white" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button class="btn btn-danger" data-dismiss="modal" aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModalll" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #168e37 !important;">
                                <h5 class="modal-title text-white" id="exampleModalLabel">
                                    <label class="text-white text-center" ng-repeat="activite in indicateurs"
                                        ng-if="Motif.id_indicateur === activite.id_indicateur_tache">
                                        {{activite.intitule_indicateur_tache}}  <span
                                            style="color: black; font-family: 'Times New Roman', Times, serif;">(Valeur
                                            cible: <label for="" style="color: red; font-size: 16px;">
                                                {{TotalValeurcible}}</label> )
                                        </span>
                                    </label>
                                </h5>
                                <button type="button" ng-click="InitialiseActivite()" class="close" data-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form name="FormMotif" novalidate>

                                    <div class="">
                                        <!-- Deuxième champ textarea -->

                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <div class="col-lg-9">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        type="hidden" name="ObservationGenerale"
                                                        ng-model="Motif.id_indicateur" ng-pattern="regexCote">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <div class="col-lg-1" ng-show=" 1 <= getMonthActuelle()"></div>
                                                <label for="message-text" ng-show=" 1 <= getMonthActuelle()"
                                                    class="col-form-label text-al col-lg-2 fas fa-check-circle"> Janvier
                                                </label>
                                                <!-- <div class="col-lg-6"></div>  -->
                                                <div class="col-lg-3" ng-show=" 1 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="text"
                                                        ng-model="Motif.valeur_cible1" ng-pattern="regexCote" required>
                                                </div>
                                                <div class="col-lg-1"></div>
                                                <label ng-show=" 2 <= getMonthActuelle()" for="message-text"
                                                    class="col-form-label text-al col-lg-2 fas fa-check-circle"> Février
                                                </label>
                                                <!-- <div class="col-lg-6"></div>  -->
                                                <div class="col-lg-3" ng-show=" 2 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="text"
                                                        ng-model="Motif.valeur_cible2" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible1 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible2 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        <style>
                                            .text-al {
                                                text-align: right;
                                            }
                                        </style>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <div class="col-lg-1" ng-show=" 3 <= getMonthActuelle()"></div>
                                                <label for="message-text" ng-show=" 3 <= getMonthActuelle()"
                                                    class="col-form-label text-al col-lg-2 fas fa-check-circle"> Mars
                                                </label>
                                                <div class="col-lg-3" ng-show=" 3 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="text"
                                                        ng-model="Motif.valeur_cible3" ng-pattern="regexCote" required>
                                                </div>
                                                <div class="col-lg-1"></div>
                                                <label for="message-text" ng-show=" 4 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-2 text-al fas fa-check-circle"> Avril
                                                </label>
                                                <div class="col-lg-3" ng-show=" 4 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="text"
                                                        ng-model="Motif.valeur_cible4" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible3 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible4 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <div class="col-lg-1" ng-show=" 5 <= getMonthActuelle()"></div>
                                                <label for="message-text" ng-show=" 5 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-2 text-al fas fa-check-circle"> Mai
                                                </label>
                                                <div class="col-lg-3" ng-show=" 5 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible5" ng-pattern="regexCote" required>
                                                </div>
                                                <div class="col-lg-1"></div>
                                                <label for="message-text" ng-show=" 6 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-2 text-al fas fa-check-circle"> Juin
                                                </label>
                                                <div class="col-lg-3" ng-show=" 6 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible6" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible5 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible6 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <div class="col-lg-1" ng-show=" 7 <= getMonthActuelle()"></div>
                                                <label for="message-text" ng-show=" 7 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-2 text-al fas fa-check-circle"> Juillet
                                                </label>
                                                <div class="col-lg-3" ng-show=" 7 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible7" ng-pattern="regexCote" required>
                                                </div>
                                                <div class="col-lg-1"></div>
                                                <label for="message-text" ng-show=" 8 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-2 text-al fas fa-check-circle"> Août
                                                </label>
                                                <div class="col-lg-3" ng-show=" 8 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible8" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible7 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible8 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <!-- <div class="col-lg-1"></div> -->
                                                <label for="message-text" ng-show=" 9 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-3 text-al fas fa-check-circle">
                                                    Septembre </label>
                                                <div class="col-lg-3" ng-show=" 9 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="text"
                                                        ng-model="Motif.valeur_cible9" ng-pattern="regexCote" required>
                                                </div>
                                                <!-- <div class="col-lg-1"></div> -->
                                                <label for="message-text" ng-show=" 10 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-3 text-al fas fa-check-circle"> Octobre
                                                </label>
                                                <div class="col-lg-3" ng-show=" 10 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible10" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible9 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible10 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <!-- <div class="col-lg-1"></div> -->
                                                <label for="message-text" ng-show=" 11 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-3 text-al fas fa-check-circle">
                                                    Novembre </label>
                                                <div class="col-lg-3" ng-show=" 11 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible11" ng-pattern="regexCote" required>
                                                </div>
                                                <!-- <div class="col-lg-1"></div> -->
                                                <label for="message-text" ng-show=" 12 <= getMonthActuelle()"
                                                    class="col-form-label col-lg-3 text-al fas fa-check-circle">
                                                    Decembre </label>
                                                <div class="col-lg-3" ng-show=" 12 <= getMonthActuelle()">
                                                    <input class="form-control ng-pristine ng-untouched ng-valid"
                                                        name="ObservationGenerale" type="texttext"
                                                        ng-model="Motif.valeur_cible12" ng-pattern="regexCote" required>
                                                </div>
                                            </div>
                                            <label class="text-danger" ng-if="Motif.valeur_cible11 < 0">la valeur doit être > ou = 0</label>
                                            <label class="text-danger" ng-if="Motif.valeur_cible12 < 0">la valeur doit être > ou = 0</label>
                                        </div>
                                        
                                    <label style="font-size: 20px;font-weight: 600;" class="text-danger" ng-if="StringToInt(Motif.valeur_cible1) + StringToInt(Motif.valeur_cible2) + StringToInt(Motif.valeur_cible3) + StringToInt(Motif.valeur_cible4) + StringToInt(Motif.valeur_cible5) + StringToInt(Motif.valeur_cible6) + StringToInt(Motif.valeur_cible7) + StringToInt(Motif.valeur_cible8) + StringToInt(Motif.valeur_cible9) + StringToInt(Motif.valeur_cible10) + StringToInt(Motif.valeur_cible11) + StringToInt(Motif.valeur_cible12)> StringToInt(TotalValeurcible)">Le cumule des valeurs réalisées est plus grande que la valeur cible planifiée</label>
                               
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer"> <button name="Valider" value="Valider" ng-disabled="(StringToInt(Motif.valeur_cible1) + StringToInt(Motif.valeur_cible2) + StringToInt(Motif.valeur_cible3) + StringToInt(Motif.valeur_cible4) + StringToInt(Motif.valeur_cible5) + StringToInt(Motif.valeur_cible6) + StringToInt(Motif.valeur_cible7) + StringToInt(Motif.valeur_cible8) + StringToInt(Motif.valeur_cible9) + StringToInt(Motif.valeur_cible10) + StringToInt(Motif.valeur_cible11) + StringToInt(Motif.valeur_cible12)> StringToInt(TotalValeurcible)) && (Motif.valeur_cible1 < 0 || Motif.valeur_cible2 < 0 || Motif.valeur_cible3 < 0 || Motif.valeur_cible4 < 0 || Motif.valeur_cible5 < 0 || Motif.valeur_cible6 < 0 || Motif.valeur_cible7 < 0 || Motif.valeur_cible8 < 0 || Motif.valeur_cible9 < 0 || Motif.valeur_cible10 < 0 || Motif.valeur_cible11 < 0 || Motif.valeur_cible12 < 0)"
                                    ng-click="ValiderEditionTache2(alertID,TotalValeurcible,id_activite_ptba_indicateur,Version)"
                                    style="background-color: #168e37 !important;" class="btn text-white" type="submit">
                                    <i class="fa fa-fw fa-lg fa-check-circle"></i>Valider
                                </button>

                                <button class="btn btn-danger" data-dismiss="modal" data-toggle="modal"
                                    data-target="#exampleModal111" aria-label="Close">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i><span
                                        aria-hidden="true">Annuler</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="exampleModal111" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color:#168E37; color: white !important;">
                                <h5 class="modal-title" id="exampleModalLabel">
                                    <label class="text-white text-center" ng-repeat="activite in ListeActivite"
                                        ng-if="id_activite_ptba_3 === activite.id_ptba">
                                        {{activite.code_activite_ptba}}: {{activite.intitule_activite_ptba}}
                                    </label>
                                </h5>
                                <!-- ng-if="showbutton1(myindicateur) === 2 || suividata.length === 0" -->
                                <!-- <a href="" style="color: white;background-color: black; font-size: 20px; padding: 5px" ng-click="InitialiseDashboardG();Motif.IdTache = myindicateur" class="btn-sm btn col-lg-2"  data-toggle="modal" data-target="#exampleModalll" data-dismiss="modal">
                                                <i class="fas fa-plus-circle"> Nouveau</i> 
                                          </a>  -->
                            </div>
                            <div class="modal-body">
                                <table id="" class="table table-striped table-responsive table-bordered">
                                    <thead>
                                        <tr>
                                            <!-- <th>Code </th> -->
                                            <th width="300">Indicateurs Activités</th>
                                            <th width="120">Unité</th>
                                            <th width="120">Valeur cible</th>
                                            <th width="120">Valeur Réalisée</th>
                                            <th width="100">Taux de Réalisation</th>
                                            <th width="180">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr class="odd gradeX" ng-repeat="indication in indicateurs">
                                            <td>{{indication.intitule_indicateur_tache}}</td>
                                            <td>{{indication.unite}}</td>
                                            <td>{{indication.valeur_cible}}</td>
                                            <td>{{getValeurRealise(indication.id_indicateur_tache)}}</td>
                                            <td>{{getValeurRealise(indication.id_indicateur_tache) /
                                                indication.valeur_cible * 100 | number:2 }} % </td>
                                            <td>
                                                <div ng-if="indication.statut != 1 && indication.statut != 2">
                                                    <a href=""
                                                        ng-click="getIndicateurById(indication.id_indicateur_tache,indication.valeur_cible,indication.id_ptba)"
                                                        data-toggle="modal" data-target="#exampleModalll"
                                                        data-dismiss="modal" title="Ajouter">
                                                        <i class="fas fa-plus-circle"
                                                            style="color:#E79300;font-size: 20px;"></i>
                                                    </a>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === indication.id_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href="" title="Valider"
                                                                ng-click="getAlertValidationIndicateur(indication.id_indicateur_tache,indication.id_ptba,1)">
                                                                <i class="fas fa-check-circle"
                                                                    style="font-size: 20px;"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <div ng-if="indication.statut == 2">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée par le SSE
                                                        </i>
                                                    </label>
                                                </div>
                                                <!-- </div> -->
                                                <div ng-if="indication.statut == 1">
                                                    <label>
                                                        <i class="fas fa-check mr-2"
                                                            style="color:#168E37;font-size: 20px;" aria-hidden="true">
                                                            validée
                                                        </i>
                                                    </label>
                                                    <label for="" ng-repeat="activite in ListeActivite"
                                                        ng-if="activite.id_ptba === indication.id_ptba">
                                                        <label for="" ng-if="activite.responsable === nom1">
                                                            <a href="" title="Annuler" style="color:#cf0d0d;"
                                                                ng-click="getAlertValidationIndicateur(indication.id_indicateur_tache,indication.id_ptba,0)">
                                                                <i class="fas fa-times fa-2x"></i> </a>
                                                        </label>
                                                    </label>
                                                </div>
                                                <div>

                                                </div>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button data-dismiss="modal" aria-label="Close"
                                    style="background-color: #168e37 !important;" class="btn text-white" type="submit">
                                    <i class="fa fa-fw fa-lg fa-times-circle"></i>Fermer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="d-flex bd-highlight" ng-show="ListeActivite.length > 0">
                    <div class="p-2 bd-highlight ml-auto">
                        <dir-pagination-controls on-page-change="pageChangeHandler(newPageNumber)" max-size="5"
                            direction-links="true" boundary-links="true"></dir-pagination-controls>
                    </div>
                </div> -->
            </div>

        </div>
</section>